{
  "info": {
    "name": "Eastmond Villa API",
    "description": "Correct Postman collection: valid JSON; real endpoints only (auth, admin users, properties, bookings, availability). Media handled only via property creation.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "version": "2.1.0"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {"key": "token", "value": "{{access_token}}", "type": "string"}
    ]
  },
  "item": [
    {
      "name": "üîê Authentication",
      "item": [
        {
          "name": "Register New User",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {"mode": "raw", "raw": "{\n  \"email\": \"newuser@example.com\",\n  \"name\": \"New Customer\",\n  \"phone\": \"+1234567890\",\n  \"password1\": \"SecurePass123!\",\n  \"password2\": \"SecurePass123!\"\n}"},
            "url": {"raw": "{{base_url}}/api/registration/", "host": ["{{base_url}}"], "path": ["api","registration",""]},
            "description": "Register a new user (default role customer)."
          }
        },
        {
          "name": "Login",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {"mode": "raw", "raw": "{\n  \"email\": \"{{current_user_email}}\",\n  \"password\": \"{{current_user_password}}\"\n}"},
            "url": {"raw": "{{base_url}}/api/auth/login/", "host": ["{{base_url}}"], "path": ["api","auth","login",""]},
            "description": "Login and obtain tokens."
          }
        },
        {"name": "Get Current User", "request": {"method": "GET", "url": {"raw": "{{base_url}}/api/auth/user/", "host": ["{{base_url}}"], "path": ["api","auth","user",""]}, "description": "Fetch authenticated user."}},
        {
          "name": "Refresh Token",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {"mode": "raw", "raw": "{\n  \"refresh\": \"{{refresh_token}}\"\n}"},
            "url": {"raw": "{{base_url}}/api/auth/token/refresh/", "host": ["{{base_url}}"], "path": ["api","auth","token","refresh",""]}
          }
        },
        {
          "name": "Logout",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {"mode": "raw", "raw": "{}"},
            "url": {"raw": "{{base_url}}/api/auth/logout/", "host": ["{{base_url}}"], "path": ["api","auth","logout",""]},
            "description": "Invalidate tokens (server-side if supported)."
          }
        }
      ]
    },
    {
      "name": "üëë Admin Users",
      "item": [
        {"name": "List Users", "request": {"method": "GET", "url": {"raw": "{{base_url}}/api/admin/users/", "host": ["{{base_url}}"], "path": ["api","admin","users",""]}}},
        {"name": "Create User", "request": {"method": "POST", "header": [{"key": "Content-Type", "value": "application/json"}], "body": {"mode": "raw", "raw": "{\n  \"email\": \"manager@example.com\",\n  \"name\": \"Manager\",\n  \"password\": \"ManagerPass123!\",\n  \"role\": \"manager\",\n  \"permission\": \"full_access\",\n  \"is_active\": true\n}"}, "url": {"raw": "{{base_url}}/api/admin/users/", "host": ["{{base_url}}"], "path": ["api","admin","users",""]}}},
        {"name": "Get User", "request": {"method": "GET", "url": {"raw": "{{base_url}}/api/admin/users/{{target_user_id}}/", "host": ["{{base_url}}"], "path": ["api","admin","users","{{target_user_id}}",""]}}},
        {"name": "Update User", "request": {"method": "PATCH", "header": [{"key": "Content-Type", "value": "application/json"}], "body": {"mode": "raw", "raw": "{\n  \"role\": \"agent\",\n  \"permission\": \"read_write\"\n}"}, "url": {"raw": "{{base_url}}/api/admin/users/{{target_user_id}}/", "host": ["{{base_url}}"], "path": ["api","admin","users","{{target_user_id}}",""]}}},
        {"name": "Delete User", "request": {"method": "DELETE", "url": {"raw": "{{base_url}}/api/admin/users/{{target_user_id}}/", "host": ["{{base_url}}"], "path": ["api","admin","users","{{target_user_id}}",""]}}}
      ]
    },
    {
      "name": "üè° Properties",
      "item": [
        {"name": "List Properties", "request": {"method": "GET", "url": {"raw": "{{base_url}}/api/villas/properties/?ordering=-created_at", "host": ["{{base_url}}"], "path": ["api","villas","properties",""]}}},
        {"name": "Search Properties", "request": {"method": "GET", "url": {"raw": "{{base_url}}/api/villas/properties/?city=Miami&min_price=100&max_price=1000", "host": ["{{base_url}}"], "path": ["api","villas","properties",""]}}},
        {"name": "Get Property", "request": {"method": "GET", "url": {"raw": "{{base_url}}/api/villas/properties/{{property_id}}/", "host": ["{{base_url}}"], "path": ["api","villas","properties","{{property_id}}",""]}}},
        {"name": "Create Property (Multipart)", "request": {"method": "POST", "body": {"mode": "formdata", "formdata": [
          {"key": "title", "value": "Luxury Beach Villa", "type": "text"},
          {"key": "description", "value": "Ocean view villa", "type": "text"},
          {"key": "price", "value": "750.00", "type": "text"},
          {"key": "listing_type", "value": "rent", "type": "text"},
          {"key": "status", "value": "draft", "type": "text"},
          {"key": "address", "value": "123 Ocean Drive", "type": "text"},
          {"key": "city", "value": "Miami", "type": "text"},
          {"key": "add_guest", "value": "10", "type": "text"},
          {"key": "bedrooms", "value": "5", "type": "text"},
          {"key": "bathrooms", "value": "4", "type": "text"},
          {"key": "pool", "value": "1", "type": "text"},
          {"key": "amenities", "value": "{\"wifi\": true, \"pool\": \"private\"}", "type": "text"},
          {"key": "latitude", "value": "25.790700", "type": "text"},
          {"key": "longitude", "value": "-80.130000", "type": "text"},
          {"key": "media_files", "type": "file", "src": []},
          {"key": "media_metadata", "value": "{\"category\":\"media\",\"caption\":\"Main View\",\"is_primary\":true,\"order\":0}", "type": "text"}
        ]}, "url": {"raw": "{{base_url}}/api/villas/properties/", "host": ["{{base_url}}"], "path": ["api","villas","properties",""]}, "description": "Create property (media handled inline)."}},
        {"name": "Update Property", "request": {"method": "PATCH", "header": [{"key": "Content-Type", "value": "application/json"}], "body": {"mode": "raw", "raw": "{\n  \"price\": \"800.00\",\n  \"status\": \"pending_review\"\n}"}, "url": {"raw": "{{base_url}}/api/villas/properties/{{property_id}}/", "host": ["{{base_url}}"], "path": ["api","villas","properties","{{property_id}}",""]}}},
        {"name": "Delete Property", "request": {"method": "DELETE", "url": {"raw": "{{base_url}}/api/villas/properties/{{property_id}}/", "host": ["{{base_url}}"], "path": ["api","villas","properties","{{property_id}}",""]}}},
        {"name": "Availability (Month)", "request": {"method": "GET", "url": {"raw": "{{base_url}}/api/villas/properties/{{property_id}}/availability/?month=12&year=2025", "host": ["{{base_url}}"], "path": ["api","villas","properties","{{property_id}}","availability",""]}}}
      ]
    },
    {
      "name": "üìÖ Bookings",
      "item": [
        {"name": "List Bookings", "request": {"method": "GET", "url": {"raw": "{{base_url}}/api/villas/bookings/", "host": ["{{base_url}}"], "path": ["api","villas","bookings",""]}}},
        {"name": "Create Booking", "request": {"method": "POST", "header": [{"key": "Content-Type", "value": "application/json"}], "body": {"mode": "raw", "raw": "{\n  \"property\": {{property_id}},\n  \"full_name\": \"John Guest\",\n  \"email\": \"guest@example.com\",\n  \"phone\": \"+1234567890\",\n  \"check_in\": \"2025-12-15\",\n  \"check_out\": \"2025-12-22\",\n  \"total_price\": \"5250.00\"\n}"}, "url": {"raw": "{{base_url}}/api/villas/bookings/", "host": ["{{base_url}}"], "path": ["api","villas","bookings",""]}}},
        {"name": "Get Booking", "request": {"method": "GET", "url": {"raw": "{{base_url}}/api/villas/bookings/{{booking_id}}/", "host": ["{{base_url}}"], "path": ["api","villas","bookings","{{booking_id}}",""]}}},
        {"name": "Approve Booking", "request": {"method": "PATCH", "header": [{"key": "Content-Type", "value": "application/json"}], "body": {"mode": "raw", "raw": "{\n  \"status\": \"approved\"\n}"}, "url": {"raw": "{{base_url}}/api/villas/bookings/{{booking_id}}/", "host": ["{{base_url}}"], "path": ["api","villas","bookings","{{booking_id}}",""]}}},
        {"name": "Reject Booking", "request": {"method": "PATCH", "header": [{"key": "Content-Type", "value": "application/json"}], "body": {"mode": "raw", "raw": "{\n  \"status\": \"rejected\"\n}"}, "url": {"raw": "{{base_url}}/api/villas/bookings/{{booking_id}}/", "host": ["{{base_url}}"], "path": ["api","villas","bookings","{{booking_id}}",""]}}},
        {"name": "Cancel Booking", "request": {"method": "PATCH", "header": [{"key": "Content-Type", "value": "application/json"}], "body": {"mode": "raw", "raw": "{\n  \"status\": \"cancelled\"\n}"}, "url": {"raw": "{{base_url}}/api/villas/bookings/{{booking_id}}/", "host": ["{{base_url}}"], "path": ["api","villas","bookings","{{booking_id}}",""]}}}
      ]
    },
    {
      "name": "üìù Notes",
      "item": [
        {"name": "Media Handling", "request": {"method": "GET", "url": {"raw": "https://example.invalid/", "host": ["example","invalid"], "path": [""]}, "description": "Placeholder"}, "description": "Media files are uploaded only during property creation via multipart form. No standalone /media/ endpoints exist."}
      ]
    }
  ]
}
